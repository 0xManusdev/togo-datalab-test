generator client {
    provider = "prisma-client"
    output   = "../src/generated/prisma"
}

datasource db {
    provider = "postgresql"
}

enum Role {
    EMPLOYEE
    ADMIN
}

enum BookingStatus {
    CONFIRMED
    CANCELLED
}

model User {
    id        String  @id @default(uuid())
    email     String  @unique
    password  String
    firstName String
    lastName  String
    phone     String
    role      Role    @default(EMPLOYEE)

    bookings Booking[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Vehicle {
    id           String  @id @default(uuid())
    brand        String
    model        String
    licensePlate String  @unique
    imageUrl     String?
    isAvailable  Boolean @default(true)

    bookings Booking[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Booking {
    id String @id @default(uuid())

    userId String
    user   User   @relation(fields: [userId], references: [id])

    vehicleId String
    vehicle   Vehicle @relation(fields: [vehicleId], references: [id])

    startDate DateTime
    endDate   DateTime
    reason    String?
    destination String?

    status BookingStatus @default(CONFIRMED)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([vehicleId, status, startDate, endDate])
    @@index([userId, status])
}
